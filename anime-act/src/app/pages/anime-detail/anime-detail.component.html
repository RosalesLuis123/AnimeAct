<div *ngIf="loading" class="loading">Cargando información...</div>

<div *ngIf="!loading" class="anime-detail">
  <div class="header">
    <img [src]="anime.images?.jpg?.image_url" [alt]="anime.title" />
    <div class="info">
      <h1>{{ anime.title }}</h1>
      <p class="score">⭐ {{ anime.score || 'N/A' }}</p>
      <p class="episodes">📺 Episodios: {{ anime.episodes || 'Desconocido' }}</p>
      <p class="status">📅 Estado: {{ anime.status }}</p>
      <p>{{ anime.synopsis }}</p>

      <div class="anime-actions">
        <button (click)="toggleStatus('viendo')" [class.active]="isActive('viendo')" class="btn viendo">▶️ Viendo</button>
        <button (click)="toggleStatus('favorito')" [class.active]="isActive('favorito')" class="btn favorito">💖 Favorito</button>
        <button (click)="toggleStatus('terminado')" [class.active]="isActive('terminado')" class="btn terminado">✅ Terminado</button>
        <button (click)="toggleStatus('ver despues')" [class.active]="isActive('ver despues')" class="btn ver-despues">🕒 Ver después</button>
      </div>
    </div>
  </div>

  <div *ngIf="anime.trailer?.embed_url" class="trailer">
    <h2>🎬 Tráiler</h2>
    <iframe
      width="100%"
      height="400"
      [src]="anime.trailer.embed_url | safeUrl"
      frameborder="0"
      allowfullscreen>
    </iframe>
  </div>
</div>
